<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login & Daftar</title>
  <style>
    body { font-family: Arial; background: #f4f4f9; display: flex; justify-content: center; align-items: center; height: 100vh; }
    .container { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); width: 360px; }
    input, button { width: 100%; padding: .8rem; margin-top: .5rem; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #4a90e2; color: #fff; border: none; cursor: pointer; }
    .toggle { margin: 1rem 0; text-align: center; color: #4a90e2; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <div id="forms">
      <form id="loginForm">
        <h2>Login</h2>
        <input name="email" type="email" placeholder="Email" required>
        <input name="password" type="password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>
      <form id="registerForm" style="display:none;">
        <h2>Daftar</h2>
        <input name="nama" placeholder="Nama Lengkap" required>
        <input name="email" type="email" placeholder="Email" required>
        <input name="password" type="password" placeholder="Password" required>
        <button type="submit">Daftar</button>
      </form>
      <div class="toggle" onclick="toggleForms()">Belum punya akun? Daftar</div>
    </div>
  </div>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz82NvrnwIZmRwoSO_U32Cczo14viSp3Q7GcxKoc0RSBb1jxh3_einayLqPpB4KSg_NPQ/exec';

    function toggleForms() {
      const l = document.getElementById('loginForm'),
            r = document.getElementById('registerForm'),
            t = document.querySelector('.toggle');
      if (l.style.display === 'none') {
        l.style.display = 'block'; r.style.display = 'none';
        t.innerText = 'Belum punya akun? Daftar';
      } else {
        l.style.display = 'none'; r.style.display = 'block';
        t.innerText = 'Sudah punya akun? Login';
      }
    }

    async function kirimForm(formType, data) {
      const resp = await fetch(SCRIPT_URL + '?' + new URLSearchParams({ action: formType }), {
        method: 'POST',
        body: JSON.stringify(data)
      });
      const j = await resp.json();
      alert(j.status);
      if (formType === 'login' && j.status === 'Sukses') {
        localStorage.setItem('session', JSON.stringify(j.user));
        location.href = 'home.html';
      }
    }

    document.getElementById('loginForm').onsubmit = e => {
      e.preventDefault();
      kirimForm('login', Object.fromEntries(new FormData(e.target)));
    }
    document.getElementById('registerForm').onsubmit = e => {
      e.preventDefault();
      kirimForm('register', Object.fromEntries(new FormData(e.target)));
    }
  </script>
</body>
</html>
